class workspaceClass{constructor(e){this.wsName=e}workspace_save(){let e=Object.keys(wsItem).pop();for(let s in void 0!==e?wsId<=e&&(wsId=+e+1):wsId=0,workspaces[wsId]={},workspaces[wsId].workspace_name=this.wsName,workspaces[wsId].workspace_color="red",workspaces[wsId].urls={},workspaces[wsId].windowId={},tabs)workspaces[wsId].urls[s]={title:tabs[s].title,icon:tabs[s].favIconUrl,url:tabs[s].url,windowId:tabs[s].windowId++,groupId:tabs[s].groupId};workspaces[wsId].windowId=workspaces[wsId].urls[0].windowId,localStorage_set(),this.workspace_create_elem(wsId,this.wsName),wsId++}workspace_create_elem(e,s){let t=document.querySelector(".workspaces"),a=document.querySelector("#ws_template"),r=a.content.firstElementChild.cloneNode(!0);r.setAttribute("data-ws-id",e),r.querySelector(".ws-name").textContent=s,t.prepend(r)}workspace_tabs_get(e){let s=[],t=wsItem[e].urls;for(let a of Object.keys(t))s.push(t[a].url);return console.log(s),s}async workspace_tabs_group(e){let s=tabs.map(({id:e})=>e),t=await chrome.tabs.group({tabIds:s});await chrome.tabGroups.update(t,{title:e})}}let wsId=0,workspaces={};localStorage_get("onload");const tabs=await chrome.tabs.query({currentWindow:!0}),saveBtn=document.querySelector(".save"),wsInput=document.querySelector("#workspace-name");wsInput.onkeypress=e=>{"Enter"===e.key&&saveBtn.click()},saveBtn.addEventListener("click",async()=>{let e=wsInput.value;localStorage_get(),e?(window.wsObj=new workspaceClass(e),wsObj.workspace_save(),wsObj.workspace_tabs_group(e)):console.error("Please Enter Workspace Name")});let all_ws=document.querySelectorAll(".ws");for(const ws of all_ws)ws.querySelector("a").onclick=async e=>{let s=ws.getAttribute("data-ws-id"),t=wsObj.workspace_tabs_get(s);chrome.windows.create({url:t,type:"normal"})};let all_remove=document.querySelectorAll("svg.ws-remove");for(const remove of all_remove)remove.onclick=e=>{delete workspaces[remove.parentElement.getAttribute("data-ws-id")],localStorage_set(),remove.parentElement.remove()};function localStorage_set(){localStorage.setItem("workspaces",JSON.stringify(workspaces))}function localStorage_get(e){if(window.wsItem={},localStorage.workspaces&&(wsItem=JSON.parse(localStorage.getItem("workspaces")),"onload"==e))for(let s of(window.wsObj=new workspaceClass,Object.keys(wsItem)))wsObj.workspace_create_elem(s,wsItem[s].workspace_name);workspaces=wsItem}